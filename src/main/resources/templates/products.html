<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Товары - Виртуальный магазин</title>
		<link rel="stylesheet" th:href="@{/css/style.css}" />
	</head>
	<body>
		<div class="container">
			<header>
				<h1>Каталог товаров</h1>
			</header>

			<nav>
				<a th:href="@{/}">Главная</a>
				<a th:href="@{/products}">Товары</a>
				<a th:href="@{/customers}">Покупатели</a>
				<a th:href="@{/orders}">Заказы</a>
				<a th:href="@{/cart/select-customer}">Корзины</a>
				<a th:href="@{/reviews}">Отзывы</a>
				<a th:href="@{/payments}">Платежи</a>
				<a th:href="@{/shipments}">Доставки</a>
				<a th:href="@{/analytics}">Аналитика</a>
			</nav>

			<div
				th:if="${success}"
				class="alert alert-success"
				th:text="${success}"
			></div>
			<div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

			<div class="action-buttons">
				<a th:href="@{/products/new}" class="btn btn-primary">Добавить товар</a>
			</div>

			<h2>Все товары</h2>

			<table>
				<thead>
					<tr>
						<th>Название</th>
						<th>Категория</th>
						<th>Цена</th>
						<th>Остаток</th>
						<th>Рейтинг</th>
						<th>Действия</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="product : ${products}">
						<td th:text="${product.name}">Товар</td>
						<td th:text="${product.category}">Категория</td>
						<td th:text="${product.price} + ' ₽'">1000 ₽</td>
						<td>
							<span
								th:if="${product.quantity < 10}"
								class="badge badge-warning"
								th:text="${product.quantity}"
								>5</span
							>
							<span
								th:if="${product.quantity >= 10}"
								th:text="${product.quantity}"
								>20</span
							>
						</td>
						<td th:text="${product.rating != null ? product.rating : '-'}">
							4.5
						</td>
						<td>
							<a
								th:href="@{/products/edit/{id}(id=${product.productId})}"
								class="btn btn-small"
								>Изменить</a
							>
							<form
								th:action="@{/products/delete/{id}(id=${product.productId})}"
								method="post"
								style="display: inline"
							>
								<button
									type="submit"
									class="btn btn-small"
									onclick="return confirm('Удалить товар?')"
								>
									Удалить
								</button>
							</form>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</body>
</html>
